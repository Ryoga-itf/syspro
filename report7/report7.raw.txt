学籍番号: __STUDENT_ID__
名前: __STUDENT_NAME__
課題番号：7
練習問題番号：709
題名：システムプログラム 第7回レポート課題

要件に従い実装を行った。コードを以下に示す。

__INCLUDE(./http-server-access-ctl.c)__

本プログラムは以下の仕様を満たしている。
- HTTP サーバであり、ファイルとして練習問題 708 の表の通り扱うことができる
- requestline に「<」や「..」が含まれていたら 400 Bad Request を返す
- requestline を空白文字で分割したとき、
  要素数が 3 でないとき 400 Bad Request を返す
  最初の要素が "GET" でなければ 400 Bad Request を返す
  最後の要素が "HTTP/1.0" か "HTTP/1.1" でなければ 400 Bad Request を返す
  2 番目の要素のファイルを表示する
  この時、このファイルが存在しないときは 404 Not Found を返す
  また、特定の拡張子でないとき、400 Bad Request を返す
- 練習問題 709 問題文中に示されている IP アドレスからの接続要求のみ受け付ける
  その他は 403 Forbidden を返す

この仕様を満たしていることを確認するために実験を行った。

同じ階層に以下の内容の index.html を配置した。

__INCLUDE(./testcases/index.html)__

情報科学類 LAN からアクセスを行うと hello と表示された。
また、このサーバは画像ファイルも扱うことができる。
適当な画像ファイルを配置し、アクセスを行うと画像ファイルが表示された。

また、そんざいしないファイルに対してアクセスを行うと、404 Not Found が、
実装していない拡張子（今回は .c）にアクセスすると、400 Bad Request が返ってきた。

また、今回は Google Chrome ブラウザを用いたが、どうやら自動で
ファビコンを見に行くらしく、以下のような /favicon.ico に対しても
リクエストを飛ばしていることがわかった。

requestline is [GET /favicon.ico HTTP/1.1]

また、情報科学類 LAN 以外の IP アドレスからアクセスを行う実験を行った。
localhost のアドレスを用いてアクセスを行うと、403 Forbidden が返り、
対象のファイルを読むことはできなかった。

なお、このアクセス制御については http_ip_address_waf 関数で実現している。
